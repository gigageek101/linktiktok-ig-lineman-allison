<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>for the curious ones ðŸ‘€</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Open in your browser to continue."/>
  <style>
    :root{
      --text:#fff;
      --muted:#f0f0f0;
      --card:rgba(10,10,16,.35);
      --accent:#98f5ff;
      --ring:rgba(152,245,255,.25);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;overflow-x:hidden}
    body{
      color:var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position:relative;
      min-height:100vh;
    }
    body::before{
      content:'';
      position:fixed;
      inset:0;
      background: url('background.jpg') center center / cover no-repeat;
      z-index:0;
    }
    body::after{
      content:'';
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.15);
      z-index:1;
    }
    .container{
      width:100%;
      max-width:340px;
      position:relative;
      z-index:2;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .card{
      background:var(--card);
      border:1px solid rgba(255,255,255,.15);
      border-radius:16px;
      padding:16px;
      box-shadow:0 20px 60px rgba(0,0,0,.4);
      backdrop-filter:blur(12px) saturate(150%);
    }
    h1{
      font-size:1.3rem;
      font-weight:700;
      margin-bottom:4px;
      letter-spacing:-.02em;
      text-shadow:0 2px 4px rgba(0,0,0,.6);
    }
    p{
      color:var(--muted);
      font-size:0.85rem;
      line-height:1.4;
      text-shadow:0 1px 3px rgba(0,0,0,.5);
    }
    .step{
      background:rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.25);
      padding:12px;
      border-radius:10px;
      font-weight:700;
      font-size:0.82rem;
      margin-top:8px;
      text-shadow:0 1px 3px rgba(0,0,0,.5);
    }
    .step:first-of-type{
      margin-top:12px;
    }
    .gif-container{
      margin-top:12px;
      border-radius:12px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.15);
      box-shadow:0 10px 30px rgba(0,0,0,.3);
    }
    .gif-container img{
      display:block;
      width:100%;
      height:auto;
    }
    #finger-pointer{
      position:fixed;
      top:20px;
      right:20px;
      width:50px;
      height:auto;
      z-index:10;
      animation:pointBob 1.2s ease-in-out infinite;
      filter:drop-shadow(0 4px 12px rgba(0,0,0,.6));
      pointer-events:none;
      display:none;
    }
    @keyframes pointBob{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-8px)}
    }
    .pointer-wave{
      position:fixed;
      top:32px;
      right:32px;
      width:28px;
      height:28px;
      z-index:9;
      border-radius:999px;
      pointer-events:none;
      display:none;
    }
    .pointer-wave::before,.pointer-wave::after{
      content:"";
      position:absolute;
      inset:-10px;
      border-radius:999px;
      border:3px solid #ff3b3b;
      animation:redPulse 1.5s ease-out infinite;
      box-shadow:0 0 12px rgba(255,59,59,.6);
    }
    .pointer-wave::after{
      animation-delay:.75s;
      border-width:2.5px;
    }
    @keyframes redPulse{
      0%{
        transform:scale(.7);
        opacity:1;
      }
      50%{
        opacity:.6;
      }
      100%{
        transform:scale(2.2);
        opacity:0;
      }
    }
    .container,.gif-container,#finger-pointer,.pointer-wave{
      display:none;
    }
    .visible{
      display:block !important;
    }
    .visible.container{
      display:flex !important;
    }
    @media (max-width:520px){
      h1{font-size:1.2rem}
      .card{padding:14px}
      .step{font-size:0.78rem;padding:10px}
      .container{max-width:300px}
    }
    .debug-info{
      position:fixed;
      bottom:10px;
      left:50%;
      transform:translateX(-50%);
      background:rgba(0,0,0,.8);
      color:#0f0;
      padding:8px 16px;
      border-radius:8px;
      font-size:0.7rem;
      font-family:monospace;
      z-index:999;
      max-width:90%;
      text-align:center;
      word-break:break-all;
      display:none;
    }
    .debug-info.visible{
      display:block;
    }
  </style>
</head>
<body>
  <div class="pointer-wave"></div>
  <img id="finger-pointer" src="finger.png" alt="Pointer">

  <div class="debug-info" id="debug-info"></div>

  <div class="container">
    <div class="card">
      <h1>for the curious ones ðŸ‘€</h1>
      <p>Follow these steps to continue:</p>
      
      <div class="step">1. Tap the three dots in the top right corner</div>
      <div class="step">2. Select "Open in browser"</div>
      
      <div class="gif-container">
        <img src="https://s6.gifyu.com/images/bz27i.gif" alt="How to open in browser" loading="lazy">
      </div>
    </div>
  </div>

  <script>
    const TARGET_URL = "https://www.instagram.com/thelinemangirl/";

    function isInAppBrowser(){
      const ua = navigator.userAgent || navigator.vendor || window.opera || "";
      const hay = ua.toLowerCase();
      
      // TikTok uses multiple identifiers in their in-app browser
      const needles = [
        "instagram","fb_iab","fb4a","fban","fbav","facebook","messenger",
        "tiktok","aweme","bytedancewebview","musically","bytedance",
        "twitter","line","kakaotalk","snapchat",
        "micromessenger","wechat","pinterest","reddit",
        "telegram","linkedin"
      ];
      
      // Check if any of the in-app browser identifiers are present
      if(needles.some(n => hay.includes(n))){
        return true;
      }
      
      // Additional check for Android WebView (fallback detection)
      if(hay.includes('android') && hay.includes(' wv')){
        // Make sure it's not a real browser
        if(!hay.includes('chrome') && !hay.includes('firefox') && !hay.includes('safari')){
          return true;
        }
      }
      
      return false;
    }

    function showDebugInfo(message){
      const debug = document.getElementById("debug-info");
      if(debug){
        debug.textContent = message;
        debug.classList.add("visible");
      }
    }

    function showInstructionUI(show){
      const container = document.querySelector(".container");
      const finger = document.getElementById("finger-pointer");
      const wave = document.querySelector(".pointer-wave");
      const gifContainer = document.querySelector(".gif-container");
      
      if(show){
        [container,finger,wave,gifContainer].forEach(el => {
          if(el) el.classList.add("visible");
        });
      }else{
        [container,finger,wave,gifContainer].forEach(el => {
          if(el) el.classList.remove("visible");
        });
      }
    }

    function checkBrowser(){
      // Debug: Log user agent to console for troubleshooting
      console.log('User Agent:', navigator.userAgent);
      console.log('Is In-App Browser:', isInAppBrowser());
      
      // Test mode: add ?test=true to URL to preview in-app browser view
      const urlParams = new URLSearchParams(window.location.search);
      const showDebug = urlParams.get('debug') === 'true';
      
      if(showDebug){
        showDebugInfo('UA: ' + navigator.userAgent.substring(0, 80) + '... | In-App: ' + isInAppBrowser());
      }
      
      if(urlParams.get('test') === 'true'){
        showInstructionUI(true);
        if(showDebug) showDebugInfo('TEST MODE - In-App Browser View');
        return;
      }
      
      if(isInAppBrowser()){
        console.log('In-app browser detected - showing instructions');
        showInstructionUI(true);
        if(showDebug) showDebugInfo('In-App Browser Detected');
        return;
      }
      
      console.log('Regular browser detected - redirecting to:', TARGET_URL);
      if(showDebug) showDebugInfo('Regular Browser - Redirecting...');
      
      // Regular browser - redirect
      const q = location.search || "";
      const hash = location.hash || "";
      const url = new URL(TARGET_URL);
      if(q && !url.search) url.search = q;
      if(hash && !url.hash) url.hash = hash;
      
      const same = (url.origin === location.origin) && (url.pathname === location.pathname);
      if(!same){
        window.location.replace(url.toString());
      }else{
        showInstructionUI(true);
      }
    }

    // Run on load
    if(document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', checkBrowser);
    }else{
      checkBrowser();
    }
  </script>
</body>
</html>
